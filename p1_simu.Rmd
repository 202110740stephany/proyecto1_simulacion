---
title: "Proyecto_Simu"
output: html_document
date: "2024-10-05"
---
```{r, message=FALSE,  warning=FALSE}
if(!require(dplyr)){install.packages('dplyr')}
library(dplyr)
if(!require(readxl)){install.packages("readxl")}
library(readxl)
if(!require(lubridate)){install.packages('lubridate')}
library(lubridate)

```


## Ordenamos la variable "Date Time Stamp"

```{r}
# Ordenar los datos por la columna 'Date Time Stamp' de forma creciente
Datos_ordenados <- Datos %>%
  arrange(`Date Time Stamp`)
# Ver los primeros registros del dataframe ordenado
head(Datos_ordenados)
View(Datos_ordenados)
```
## Limpieza de datos:

- Revisión de la cantidad de NA's  en las variables:

```{r}
na_counts <- sapply(Datos_ordenados, function(x) sum(is.na(x)))
na_counts
```
Tenemos 539 NA en Duratiom

## Cambio del nombre de las variables:
```{r}
library(dplyr)

# Renombrar las variables
Datos_ordenados <- Datos_ordenados %>%
  rename(
    Fecha = fecha,
    Inicio_Llamada = `Date Time Stamp`,  # Usar comillas para nombres con espacios
    Duracion = Duratiom,  # Corrige el nombre
    CallCenter = CallCenter,
    Client_Categoria = Client_Cat,
    Legalizacion_Adicional = LegalizacionAdicional,
    Sesiones_Reservadas = `Sesiones Reservadas`,  # Usar comillas para nombres con espacios
    Inicio_Reserva = `Inicio de Reserva`  # Usar comillas para nombres con espacios
  )

print(colnames(Datos_ordenados))
```
## 1) Eliminar los NA's de la variable "
```{r}
library(dplyr)

Datos_ordenados <- Datos_ordenados %>%
  filter(!is.na(Duracion))

#Verificación de eliminación de NA's
na_counts <- sapply(Datos_ordenados, function(x) sum(is.na(x)))
na_counts
```
## 2) Eliminar aquellas observaciones donde el Inicio_llamada sea mayor que Inicio_Reserva:

```{r}
library(dplyr)

# Filtrar y eliminar las filas donde Inicio_llamada > Inicio_Reserva
Datos_ordenados <- Datos_ordenados %>%
  filter(Inicio_Llamada <= Inicio_Reserva)
print(Datos_ordenados)

```

# Contar observaciones donde Inicio_Reserva < Inicio_llamada
```{r}
library(dplyr)
conteo <- Datos_ordenados %>%
  filter(Inicio_Reserva < Inicio_Llamada) %>%
  summarise(Numero_Observaciones = n())

print(conteo)

```
## 3) Filtrado de valores fuera de la restricciones establecidas para la variable "Duracion":

```{r}
#library(dplyr)
#Datos_ordenados <- Datos_ordenados %>%
# filter(Duracion >= 30 & Duracion <= 300)

```

## Revisamos la frecuencia de valores de la variable *Duracion*:
```{r}
library(dplyr)

# Definir los intervalos (bins) para Duracion
intervalos <- seq(0, ceiling(max(Datos_ordenados$Duracion, na.rm = TRUE) / 10) * 10, by = 10)

# Crear la tabla de frecuencias
tabla_frecuencias <- Datos_ordenados %>%
  mutate(Rango = cut(Duracion, breaks = intervalos, right = FALSE)) %>%  # Agrupar en intervalos
  count(Rango)  # Contar las frecuencias

# Imprimir la tabla de frecuencias
print(tabla_frecuencias)

```



